<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aerocell</title>
    <style>
        /* --- 1. BASES --- */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', 'Gill Sans MT', 'Gill Sans', 'Trebuchet MS', sans-serif;
            background-color: #f0f0f0;
            scroll-behavior: smooth;
        }

        body.stop-scrolling { overflow: hidden; height: 100vh; }

        /* --- 2. PAGE DE GARDE (SPLASH) --- */
        .splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000; z-index: 10001;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            transition: transform 0.8s ease-in-out;
        }
        .splash-screen.slide-up { transform: translateY(-100%); }
        .splash-logo { width: 200px; opacity: 0; transition: opacity 1.5s ease-in; }
        .splash-logo.loaded { opacity: 1; }

        /* --- 3. HEADER FIXE --- */
        .main-header {
            position: fixed; top: 0; left: 0; width: 100%;
            height: 80px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            padding: 0 20px;
            transition: height 0.3s;
        }
        
        .header-logo-img {
            height: 60px; width: auto;
            transition: height 0.3s;
        }

        /* --- 4. BARRE DE PROGRESSION --- */
        .progress-container {
            position: fixed; top: 80px; left: 0; width: 100%; height: 10px;
            background-color: #00431f; z-index: 9999;
            transition: top 0.3s;
        }
        .progress-bar { height: 100%; background-color: #b37d1b; width: 0%; transition: width 0.1s; }

        /* --- 5. INTRO & BOITE DE TEXTE --- */
        .intro {
            padding-top: 120px; 
            min-height: 80vh; 
            background-color: #f4f4f4; 
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            padding-bottom: 100px; 
            padding-left: 20px; padding-right: 20px;
            position: relative; 
            z-index: 1; 
        }

        .text-box {
            background-color: #ffffff;
            border: 6px solid #6fff7b;
            border-radius: 20px;
            padding: 40px; 
            max-width: 800px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: justify;
            line-height: 1.6;
            color: #333;
        }

        .text-box p {
            margin-bottom: 20px; 
            border: none;
            padding: 0;
        }
        .text-box p:last-child { margin-bottom: 0; }

        /* --- 6. S√âQUENCE (ANIMATION BASE) --- */
        .scroll-sequence-container { height: 300vh; position: relative; z-index: 2; }
        
        .sticky-wrapper {
            position: sticky; top: 90px; height: calc(100vh - 90px);
            background: #7ac38b;
            display: flex; justify-content: center; align-items: center; overflow: hidden;
        }
        
        .image-row {
            display: flex; gap: 20px; width: 90%; max-width: 1200px; justify-content: space-between;
        }
        
        .fade-image {
            width: 100%; height: 300px; border-radius: 8px;
            background-color: #444;
            display: flex; align-items: center; justify-content: center; text-align: center;
            color: white; font-size: 1.5rem; border: 2px solid white;
            padding: 10px; 
            /* L'√©tat de base : cach√© et l√©g√®rement plus bas */
            opacity: 0; transform: translateY(50px); transition: all 0.8s ease-out;
        }
        .fade-image img { width: 80%; height: 80%; object-fit: contain; display: block; }
        
        /* L'√©tat visible : pleine opacit√© et position normale */
        .fade-image.visible { opacity: 1; transform: translateY(0); }

        /* --- 7. OUTRO --- */
        .outro { 
            min-height: 100vh;
            background-color: #fff; 
            display: flex; justify-content: center; align-items: center; 
            font-size: 2rem; 
            position: relative; z-index: 3;
        }

        /* =========================================
           üì± OPTIMISATION MOBILE
           ========================================= */
        @media screen and (max-width: 768px) {
            
            .main-header { height: 60px; padding: 0 10px; }
            .header-logo-img { height: 40px; }
            .progress-container { top: 60px; height: 6px; }

            .intro { 
                padding-top: 90px; 
                min-height: auto; 
                padding-bottom: 50px; 
            }
            .text-box { padding: 20px; border-width: 4px; }
            .text-box p { font-size: 0.95rem; }

            /* --- S√âQUENCE MOBILE --- */
            .scroll-sequence-container { height: auto; min-height: auto; }

            /* D√©sactivation du Sticky */
            .sticky-wrapper {
                position: relative; top: 0; height: auto; padding: 50px 0; 
                align-items: center; overflow: visible;
            }
            
            /* Images en colonne et centr√©es */
            .image-row {
                display: flex; flex-direction: column; gap: 40px; 
                width: 90%; 
                margin: 0 auto; /* CORRECTION CENTRAGE : Ceci centre le bloc */
                height: auto;
            }

            .fade-image {
                width: 100%; height: 250px;
                /* ON A RETIR√â LE !important ICI pour permettre l'animation JS */
            }
            
            .splash-logo { width: 150px; }
        }
    </style>
</head>
<body class="stop-scrolling">
    
    <div id="splashScreen" class="splash-screen">
        <img id="logoSplash" src="Logo.svg" alt="Aerocell Splash" class="splash-logo">
        <h1 style="color:white; margin-top: 20px; font-size: 2rem;">Aerocell</h1>
        <p style="position: absolute; bottom: 80px; color: white; animation: bounce 2s infinite; font-size: 0.9rem;">SCROLLEZ POUR ENTRER üëá</p>
    </div>

    <header class="main-header">
        <img src="Logo.svg" alt="Aerocell Logo" class="header-logo-img"/>
    </header>

    <div class="progress-container"><div class="progress-bar" id="myBar"></div></div>

    <div class="intro">
        <div class="text-box">
            <p style="text-align: center; font-weight: bold; font-size: 1.2rem; color: #00431f;">
                [Ins√©rer photo de nous ici]
            </p>
            
            <p style="font-size: 1.3rem; text-align: center; color: #00431f; font-weight: bold;">
                L'isolant qui prot√®ge votre maison... et la plan√®te !
            </p>
            
            <p>Donec quis accumsan dui. Mauris id turpis magna. Phasellus finibus eros vel elit semper tincidunt. Phasellus pellentesque tortor sit amet facilisis aliquet. Donec luctus auctor est quis tincidunt. Morbi condimentum, mi accumsan imperdiet luctus, nisl arcu eleifend quam, ac suscipit lectus massa in tellus. Mauris dapibus, nisl vitae vehicula feugiat, lectus purus mattis erat, at pharetra justo tellus eu neque. Sed gravida luctus velit.</p> 
            
            <p>Proin eget augue nec lectus tempor volutpat sed sit amet odio. In hac habitasse platea dictumst. Etiam non metus a odio dapibus dapibus. Curabitur et suscipit quam, in tristique orci. Aliquam sollicitudin auctor fringilla. Suspendisse scelerisque, ligula ac mattis cursus, risus est rutrum mi, nec pulvinar mi lectus id odio.</p>
            
            <p>Fusce faucibus sagittis ante. Praesent fringilla neque enim, eu mattis ligula faucibus at. Ut condimentum eros et ex tincidunt aliquam. Curabitur massa ligula, pellentesque ut mauris sed, vulputate imperdiet turpis.</p>
        </div>
    </div>

    <div class="scroll-sequence-container">
        <div class="sticky-wrapper">
            <div class="image-row">
                <div class="fade-image">Issus de d√©chets naturels</div>
                <div class="fade-image">Traitement durable</div>
                <div class="fade-image">Isolant efficace</div>
                <div class="fade-image"><img src="Logo.svg" alt="Logo Fin"></div>
            </div>
        </div>
    </div>

    <div class="outro">
        <h1>waf</h1>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // --- SPLASH SCREEN ---
            const splashScreen = document.getElementById('splashScreen');
            const logoSplash = document.getElementById('logoSplash');
            const body = document.body;
            let hasActivated = false;

            setTimeout(() => { if(logoSplash) logoSplash.classList.add('loaded'); }, 100);

            function liftCurtain() {
                if (!hasActivated) {
                    hasActivated = true;
                    splashScreen.classList.add('slide-up');
                    setTimeout(() => { body.classList.remove('stop-scrolling'); }, 800);
                }
            }
            window.addEventListener('wheel', liftCurtain);
            window.addEventListener('touchmove', liftCurtain);
            window.addEventListener('keydown', liftCurtain);

            // --- SCROLL ANIMATIONS ---
            const progressBar = document.getElementById("myBar");
            const container = document.querySelector('.scroll-sequence-container');
            const images = document.querySelectorAll('.fade-image');

            function onScrollLogic() {
                // 1. Barre de progression (Commun PC et Mobile)
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolledPercent = (winScroll / height) * 100;
                progressBar.style.width = scrolledPercent + "%";

                // 2. Animation des images (Logique diff√©rente PC vs Mobile)
                if (window.innerWidth > 768) {
                    // --- LOGIQUE PC (AVEC STICKY) ---
                    if(container) {
                        const containerTop = container.getBoundingClientRect().top;
                        const scrollableHeight = container.offsetHeight - window.innerHeight;
                        const scrolledDist = -containerTop;

                        if (scrolledDist < 0) {
                            images.forEach(img => img.classList.remove('visible'));
                            return;
                        }
                        let progress = scrolledDist / scrollableHeight;
                        if (progress < 0) progress = 0;
                        if (progress > 1) progress = 1;
                        const totalImages = images.length;
                        const indexToShow = Math.floor(progress * (totalImages + 0.5));
                        images.forEach((img, index) => {
                            if (index <= indexToShow) img.classList.add('visible');
                            else img.classList.remove('visible');
                        });
                    }
                } else {
                    // --- LOGIQUE MOBILE (SANS STICKY, JUSTE AU SCROLL) ---
                    images.forEach(img => {
                        // On regarde la position du haut de l'image par rapport √† la fen√™tre
                        const rect = img.getBoundingClientRect();
                        const imageTop = rect.top;
                        const windowHeight = window.innerHeight;

                        // Si le haut de l'image entre dans les 85% inf√©rieurs de l'√©cran, on l'affiche
                        if(imageTop < windowHeight * 0.85) {
                             img.classList.add('visible');
                        }
                        // Note: Sur mobile, on ne retire pas la classe 'visible' quand on remonte
                        // c'est souvent plus agr√©able √† l'utilisation.
                    });
                }
            }
            window.addEventListener('scroll', onScrollLogic);
            // On lance une fois au chargement pour v√©rifier si des images sont d√©j√† visibles
            onScrollLogic();
        });
    </script>
</body>
</html>
